
《HTTP权威指南》读书笔记1
===

Date: 2015/12/04

## 第一章 HTTP概述

### 1.6 连接

#### 1.6.1 TCP/IP
	
HTTP是应用层协议，基于TCP/IP来做报文传输

TCP/IP特点：

* 无差错数据传输
* 按序传输
* 未分段的数据流

HTTP网络协议栈（从上往下）：

1. 应用层：HTTP
1. 传输层：TCP
1. 网络层：IP
1. 数据链路层：网络特有的链路接口
1. 物理层：物理网路硬件

#### 1.6.2 连接、IP地址、端口

在客户端向服务器发送报文之前，先通过IP地址和端口号在客户端和服务器之间建立一个TCP/IP连接。

举了个例：给公司办公室某个人打电话的过程。

在TCP中，需要知道IP地址和软件相关的端口号。通过URL可知IP和端口。

URL举例：

```
http://192.168.1.1:80/index.html
http://www.baidu.com/index.html
http://www.baidu.com:8080/index.html
```

第一种URL方式，给出了IP地址和端口号。

第二种URL方式，未给出IP地址和端口号。其中，如果端口号未给出，默认使用80，如果IP地址给出，只给出了域名或主机名，可通过DNS机制将其转换为IP地址。

图示浏览器如何HTTP显示位于远端服务器中的某个简单HTML资源：

![基本的浏览器连接处理](http://ww1.sinaimg.cn/mw1024/006e1q8ojw1eys7d9ggbej30di0cgtag.jpg)


#### 1.6.3 使用Telnet

Telnet常用于远程终端会话，可以连接到所有的TCP服务器，包括HTTP服务器。

Telnet可直接与web服务器进行对话，可以打开一条到某台服务器上某个端口的TCP连接，然后向那个端口输入一些字符。

Web服务器将Telnet作为一个Web客户端来处理。



## 第二章 URL与资源

URL是URI的一个子集。

### 2.1 浏览因特网资源

* URL的第一部分，给出URL方案

* URL的第二部分，给出服务器位置

* URL的第三部分，给出请求的特定资源路径

### 2.2 URL语法

URL提供了一种定位因特网上任意资源的手段，这些资源可以通过不同的方案来访问，URL语法会因为方案的不同而不同，但语法都有很多重叠的地方。

__URL通用格式__

`<scheme>://<user>:<password>@<host>:<port>/path;<params>?<query>#<frag>`

其中，最重要的组件是方案、主机和路径。各组件的总结：

![URL组件](http://ww1.sinaimg.cn/mw1024/006e1q8ogw1eyud7o8wcoj30ei0b9adg.jpg)

#### 2.2.1 方案（使用什么协议）

描述如何访问指定的资源，方案名大小写无关。

#### 2.2.2 主机和端口

主机和端口分别描述了资源在哪台机器上以及在那台机器的什么地方可以找到资源。

__主机__标识了资源的宿主机器，可以用主机名或IP地址来表示。

__端口__标识了宿主机器正在监听的网络端口，HTTP的默认端口是80

#### 2.2.3 用户名和密码

FTP服务器一般都要求提供用户名和密码后才能访问资源。

#### 2.2.4 路径

URL的路径组件描述了资源位于服务器上的位置，路径类似于分级的文件系统，比如：

```
http://www.helloworld.com/main/index.html
```

这个URL的路径是`/main/index.html`。路径提供给服务器定位资源所需的信息。

URL的路径组件内部可以用符号`/`进行分段，每个段叫做路径段，每个路径段都有自己的参数组件。

#### 2.2.5 参数

参数用得比较少，对于一些特定的协议，需要提供其参数组件，才能正常工作。

如果路径段需要提供参数组件，则参数组件位于路径段的分号后，如果参数组件包括多个参数，参数之间也是用分号分隔。

参数包括参数名和参数值，如：

```
http://www.helloworld.com/main;sale=false;first=true/index.html;picture=true;first=false
```

其中，有两个路径段，main和index.html。main路径段有参数sale，值为false，参数first，值为true；index.html路径段有参数picture，值为true，参数first，值为false。

#### 2.2.6 查询字符串

有意思的是，查询字符串位于问号`?`之后，就好像服务器在提问题，提问题的原因是服务器想要缩小资源访问的范围。如：

![查询组件](http://ww2.sinaimg.cn/mw1024/006e1q8ogw1eyudykeqskj30dh050wex.jpg)

这个例子就好像在提问题：

* 条目编号是多少？
* 颜色是什么？
* 尺寸是多少？

这样便可以缩小访问资源的范围，更精确地查找出资源信息。

__注意__：一般，查询字符串都由一系列键值对组成，每个键值对间使用`&`分隔。


#### 2.2.7 片段

片段最主要的用途是指定资源的具体章节，比如阅读一篇很长的文章，希望定位到具体的章节位置。

片段在查询组件的右边，使用`#`开头。如：

```
http://www.helloworld.com/index.html#drills
```

`#drills`就是片段组件。

__但客户端并不将片段组件发送给服务器，客户端将除片段组件外的部分发送至服务器，在得到相响应页面后，再由客户端显示指定的片段位置。__如：

![片段组件]()
